---
title: C# | WPF Prism ç”»é¢é·ç§»ãƒ¡ãƒ¢ãƒªé–‹æ”¾
description: C# WPF Prism ã®ç”»é¢é·ç§»æ™‚ã«ãŠã‘ã‚‹ãƒ¡ãƒ¢ãƒªè§£æ”¾æ–¹æ³•
date: 2023-03-05
emoji: ğŸ’»
tags: 
  - csharp
published: true
---

WPF Prism ã§ã¯ã€Regionã¨ã„ã†æ©Ÿèƒ½ã§ç”»é¢é·ç§»ã—ã¾ã™ã€‚

ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã®ç”»é¢é·ç§»ï¼ˆç”»é¢ã®ä¸€éƒ¨ã§ã‚ã‚‹Regionéƒ¨åˆ†ãŒåˆ‡ã‚Šæ›¿ã‚ã‚‹å‡¦ç†ï¼‰ã§ã¯ã€é·ç§»å…ˆã« INavigaitionAware ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’å®Ÿè£…ã—ã¾ã™ã€‚

ãã®éš›ã«ç”Ÿæˆã•ã‚Œã‚‹ **IsNavigationTarget ãƒ¡ã‚½ãƒƒãƒ‰**ã¯ã€ViewModelã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä½¿ã„å›ã™ã‹ã©ã†ã‹ã‚’ æˆ»ã‚Šå€¤ã® bool ã§åˆ¤æ–­ã—ã¾ã™ãŒã€**return false ã¨ã—ã¦ã‚‚ãƒ¡ãƒ¢ãƒªã¯é–‹æ”¾ã•ã‚Œã¾ã›ã‚“**ã€‚

**ã€IsNavigationTargetã®æˆ»ã‚Šå€¤**  
- true : ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä½¿ã„å›ã™ã€‚æ¬¡å›ã®ç”»é¢èµ·å‹•æ™‚ã«ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ãŒå‘¼ã°ã‚Œãªã„ã€‚
- false: ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä½¿ã„å›ã•ãªã„ã€‚æ¬¡å›ã®ç”»é¢èµ·å‹•æ™‚ã«ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ãŒå‘¼ã°ã‚Œã‚‹ã€‚ãŸã ã—ã€**ãƒ¡ãƒ¢ãƒªã¯é–‹æ”¾ã•ã‚Œãªã„**ã€‚

## ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ç”»é¢é·ç§»æ™‚ã«ãƒ¡ãƒ¢ãƒªã‚’é–‹æ”¾ã™ã‚‹æ–¹æ³•

ViewModelã«**IRegionMemberLifetimeã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’å®Ÿè£…**ã—ã€**KeepAliveãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®å€¤ã‚’false**ã«ã—ã¾ã™ã€‚

ã¾ãŸã€**INavigationAwareã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚‚åˆã‚ã›ã¦å®Ÿè£…**ã—ã¦ã„ã‚‹å ´åˆã€**IsNavigationTarget ã¯ True**ã«ã—ã¦ãŠãã¾ã™ã€‚

ViewModelã¸ã®å®Ÿè£…ä¾‹ã§ã™ã€‚

â–¼SampleViewModel.cs
```cs
public class SampleViewModel : BindableBase, INavigationAware, IRegionMemberLifetime
{
    /// <summary>
    /// ViewModelç ´æ£„ã«ä¼´ã„ãƒ¡ãƒ¢ãƒªé–‹æ”¾ã™ã‚‹éš›ã¯false
    /// </summary>
    public bool KeepAlive { get; set; } = false;

    public SampleViewModel()
    {
    }

    public bool IsNavigationTarget(NavigationContext navigationContext)
    {
        //// RegionMemberLifetime(KeepAlive = false)ã§ViewModelã‚’ç ´æ£„ã™ã‚‹ãŸã‚ã€ã“ã¡ã‚‰ã¯True
        return true;
    }

    public virtual void OnNavigatedFrom(NavigationContext navigationContext)
    {
    }

    public virtual void OnNavigatedTo(NavigationContext navigationContext)
    {
    }
}
```

ä»¥ä¸Šã§ã™ã€‚