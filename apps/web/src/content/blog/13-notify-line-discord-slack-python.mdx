---
title: Python | Line, Discord,Slackã¸ã®é€šçŸ¥ã‚¯ãƒ©ã‚¹
description: Python ã§Lineã€Discordã€Slackã¸ã€ãƒ†ã‚­ã‚¹ãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã€ã‚’é€ã£ã¦é€šçŸ¥ã™ã‚‹ã‚¯ãƒ©ã‚¹ã®ã‚µãƒ³ãƒ—ãƒ«
date: 2020-03-10
emoji: ğŸ“¨
tags: 
  - python
published: true
---

Python ã§Lineã€Discordã€Slackã¸ã€ãƒ†ã‚­ã‚¹ãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã€ã‚’é€ã£ã¦é€šçŸ¥ã™ã‚‹ã‚¯ãƒ©ã‚¹ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚

[ã€ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã¯ã“ã¡ã‚‰ã€‘](https://github.com/atman-33/notification-python)

## æ¦‚è¦
API ã®ãƒˆãƒ¼ã‚¯ãƒ³ã‚„ Webhook URL ã‚’ã‚»ãƒƒãƒˆã—ã€ãƒ†ã‚­ã‚¹ãƒˆã‚’èª­ã¿è¾¼ã¾ã›ã‚‹ã“ã¨ã§é€šçŸ¥ã‚’é€ã‚‹æ©Ÿèƒ½ã‚’å‚™ãˆã¦ã„ã¾ã™ã€‚

## ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸æ§‹æˆ
ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¨ã„ã†ã»ã©ã§ã‚‚ãªã„ã§ã™ãŒã€é€šçŸ¥ã‚¯ãƒ©ã‚¹ï¼ˆnotification.pyï¼‰ã¨ãƒ¡ã‚¤ãƒ³å‡¦ç†ï¼ˆdebug.pyï¼‰ã‚’æº–å‚™ã—ã¾ã—ãŸã€‚

```text
py_notification
|-notification.py
|-debug.py
```

## ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰è§£èª¬
ãƒ¡ã‚¤ãƒ³å‡¦ç†ï¼ˆdebug.pyï¼‰ ã§ é€šçŸ¥ã‚¯ãƒ©ã‚¹ï¼ˆnotification.pyï¼‰ ã‚’å‘¼ã³å‡ºã—ã¦é€šçŸ¥ã‚’å®Ÿè¡Œã•ã›ã¾ã™ã€‚

___
### â‘ notification.py

```py
import requests
import json

class Notification():
    """
    @brief : é€šçŸ¥ã‚¯ãƒ©ã‚¹
    @note  :
    """
    line_notify_token = ''
    discord_webhook_url = ''
    discord_username = ''
    slack_webhook_url = ''
    slack_username = ''

    def __init__(self):
        print("Notification ã‚¯ãƒ©ã‚¹ã‚’ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹åŒ–")

    # ----- LINE, DISCORD, SLACK ã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ã‚‹ãŸã‚ã®åˆæœŸè¨­å®š é–¢é€£----
    def set_line(self, token):
        self.line_notify_token = token

    def set_discord(self, url, username):
        self.discord_webhook_url = url
        self.discord_username = username

    def set_slack(self, url, username):
        self.slack_webhook_url = url
        self.slack_username = username        

    # ----- Notifyï¼ˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ã‚‹ï¼‰ é–¢é€£-----
    def send_message(self, text) :
        try:
            self.__line(text)
        except:
            pass
        try:
            self.__discord(text)
        except:
            pass
        try:
            self.__slack(text)
        except:
            pass

    def __line(self, message):
        if len(self.line_notify_token) > 0:
            requests.post('https://notify-api.line.me/api/notify', headers={'Authorization': 'Bearer ' + self.line_notify_token}, data={'message': '\n' + message})
            print(message + " by Line")

    def __discord(self, message):
        if len(self.discord_webhook_url) > 0:
            requests.post(self.discord_webhook_url, data={'username': self.discord_username, 'content': message})
            print(message + " by Discord")

    def __slack(self, message):
        if len(self.slack_webhook_url) > 0:
            requests.post(self.slack_webhook_url, data=json.dumps({'username': self.slack_username, 'text':message}))
            print(message + " by Slack")
```

___
### â‘¡debug.py
```py
import sys

# è‡ªä½œã‚¯ãƒ©ã‚¹ã‚’è¿½åŠ ã™ã‚‹ãŸã‚ã«å‚ç…§å…ˆã‚’è¿½åŠ 
sys.path.append("..")
# print(sys.path)

# ã‚¯ãƒ©ã‚¹èª­ã¿è¾¼ã¿ï¼šfrom <ãƒ•ã‚¡ã‚¤ãƒ«å> import <ã‚¯ãƒ©ã‚¹å>
from notification import Notification

notify = Notification()
line_token          = "LINE ã® ãƒˆãƒ¼ã‚¯ãƒ³ ã‚’ã“ã“ã«å…¥åŠ›"
discord_webhook_url = "Discord ã® Webhook URL ã‚’ã“ã“ã«å…¥åŠ›"
slack_webhook_url   = "Slack ã® Webhook URL ã‚’ã“ã“ã«å…¥åŠ›"

notify.set_line(line_token)
notify.set_discord(discord_webhook_url, "bot")
notify.set_slack(slack_webhook_url, "bot")

notify.send_message("test message")
```

è©°ã¾ã‚Šã‚„ã™ã„ã®ãŒã€è‡ªä½œã‚¯ãƒ©ã‚¹ã‚’å‘¼ã³å‡ºã™ç‚¹ã‹ã¨æ€ã„ã¾ã™ã€‚
ä»Šå›ã€ä¸‹è¨˜ã®ã‚ˆã†ã«ã—ã¦ã„ã¾ã™ãŒã€  
`from notification import Notification`  
`from <ãƒ•ã‚¡ã‚¤ãƒ«å> import <ã‚¯ãƒ©ã‚¹å>`ã€€ã¨ã„ã†ã‚ˆã†ã«å¯¾å¿œã—ã¦ã„ã¾ã™ã€‚  

ã¾ãŸã€è‡ªä½œã‚¯ãƒ©ã‚¹ã‚’è¿½åŠ ã™ã‚‹éš›ã¯å‚ç…§å…ˆã‚’ syspath.append ã§è¿½åŠ ã™ã‚‹ã“ã¨ã‚’å¿˜ã‚Œãªã„ã‚ˆã†ã«ã—ã¦ãã ã•ã„ã€‚

ä»¥ä¸Šã§ã™ã€‚

ä½™è«‡ã§ã™ãŒã€ã‚„ã¯ã‚ŠPythonã¯æ›¸ãã‚„ã™ãã€ã‚³ãƒ¼ãƒ‰ãŒãã‚Œã„ã ã¨æ”¹ã‚ã¦æ„Ÿã˜ã¾ã—ãŸã€‚
