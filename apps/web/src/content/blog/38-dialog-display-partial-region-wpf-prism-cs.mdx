---
title: C# | WPF Prism ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ç”»é¢å†…ã«Regionï¼ˆContentControlï¼‰ã‚’é…ç½®ã™ã‚‹æ–¹æ³•
description: WPF Prismã§ã¯ã€Dialogç”»é¢å†…ã®ContentControlã«åˆ¥ã®Viewã‚’è¡¨ç¤ºã•ã›ã‚‹æ–¹æ³•
date: 2023-03-19
emoji: ğŸ¦“
tags: 
  - csharp
published: true
---

WPF Prismã§ã¯ã€Dialogç”»é¢å†…ã®ContentControlã«åˆ¥ã®Viewã‚’è¡¨ç¤ºã•ã›ã‚‹æ–¹æ³•ã¨ã—ã¦ã€ä»¥ä¸‹ã®æ‰‹é †ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚

### ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ç”¨ã®Viewã‚’ä½œæˆ

1. ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ç”¨ã®Viewã‚’ä½œæˆã—ã¾ã™ã€‚ä¾‹ãˆã°ã€"MyDialogView"ã¨ã„ã†åå‰ã®Viewã‚’ä½œæˆã—ã¾ã™ã€‚
2. ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ç”¨ã®ViewModelã‚’ä½œæˆã—ã¾ã™ã€‚ä¾‹ãˆã°ã€"MyDialogViewModel"ã¨ã„ã†åå‰ã®ViewModelã‚’ä½œæˆã—ã¾ã™ã€‚
3. ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ç”¨ã®Viewã«ã€ContentControlã‚’è¿½åŠ ã—ã¾ã™ã€‚

ä¾‹ãˆã°ã€ä»¥ä¸‹ã®ã‚ˆã†ãªXAMLã‚³ãƒ¼ãƒ‰ã‚’ä½¿ç”¨ã—ã¦ã€ContentControlã‚’è¿½åŠ ã—ã¾ã™ã€‚

```xml
<UserControl x:Class="MyNamespace.MyDialogView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:prism="http://www.codeplex.com/prism"
    prism:ViewModelLocator.AutoWireViewModel="True"
    Width="300"
    Height="300">    
    <ContentControl 
        prism:RegionManager.RegionManager="{Binding MainRegionManager}" 
        prism:RegionManager.RegionName="{Binding ContentRegionName}"/>
</UserControl>
```

### ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã®ä¸€éƒ¨ã«è¡¨ç¤ºã•ã›ã‚‹Viewã‚’ä½œæˆ

4. ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ç”¨ã®Viewã«ã€è¡¨ç¤ºã•ã›ãŸã„Viewã‚’å®šç¾©ã—ã¾ã™ã€‚ä¾‹ãˆã°ã€ä»¥ä¸‹ã®ã‚ˆã†ãªXAMLã‚³ãƒ¼ãƒ‰ã‚’ä½¿ç”¨ã—ã¦ã€è¡¨ç¤ºã•ã›ãŸã„Viewã‚’å®šç¾©ã—ã¾ã™ã€‚

```xml
<UserControl x:Class="MyNamespace.MyContentView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    <Grid>
        <!-- è¡¨ç¤ºã•ã›ãŸã„ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®å®šç¾© -->
    </Grid>
</UserControl>
```

### ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ç”¨ã®ViewModelã«å‡¦ç†ã‚’è¿½åŠ 

5. ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ç”¨ã®ViewModelã®ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã§ã€è¡¨ç¤ºã•ã›ãŸã„Viewã‚’è¡¨ç¤ºã™ã‚‹ãŸã‚ã®å‡¦ç†ã‚’è¿½åŠ ã—ã¾ã™ã€‚

```cs
public MyDialogView(IRegionManager regionManager)
{
    MainRegionManager = regionManager;  
    MainRegionManager.RegisterViewWithRegion(_contentRegionName, nameof(MyContentView));
}

private IRegionManager _mainRegionManager;
public IRegionManager MainRegionManager
{
    get { return _mainRegionManager; }
    set { SetProperty(ref _mainRegionManager, value); }
}

private readonly string _contentRegionName = "dialogRegionName";
public string ContentRegionName
{
    get { return _contentRegionName; }
}
```

**Dialogã®å ´åˆã€Dialogã®RegionManagerã«ã€æ³¨å…¥ã•ã‚ŒãŸRegionManagerã‚’è¨­å®š**ã™ã‚‹å¿…è¦ã‚ã‚‹ã®ã§è¦æ³¨æ„ã§ã™ã€‚

ã“ã‚Œã‚‰ã®æ‰‹é †ã‚’å®Ÿè¡Œã™ã‚‹ã“ã¨ã§ã€ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ç”»é¢å†…ã®ContentControlã«åˆ¥ã®Viewã‚’è¡¨ç¤ºã•ã›ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚  
ãŸã ã—ã€Viewã®è¡¨ç¤ºæ–¹æ³•ã‚„ViewModelã®ä½œæˆæ–¹æ³•ã¯ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«ã‚ˆã£ã¦ç•°ãªã‚‹å ´åˆãŒã‚ã‚‹ãŸã‚ã€é©å®œå¤‰æ›´ã—ã¦ãã ã•ã„ã€‚